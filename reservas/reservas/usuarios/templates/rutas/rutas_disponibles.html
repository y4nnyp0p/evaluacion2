{% extends "base.html" %}
{% block title %}Rutas disponibles{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="section-title mb-1">Rutas publicas</h2>
    <p class="section-subtitle mb-0">Consulta la oferta actual y registrate para reservar tus asientos.</p>
  </div>
  <a href="{% url 'ingreso_modal' %}" class="btn btn-primary">Crear cuenta</a>
</div>

<form method="get" class="filter-bar">
  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Origen</label>
      <select name="origen" class="form-select">
        <option value="">Todos</option>
        {% for opcion in origenes %}
          <option value="{{ opcion }}" {% if opcion == origen %}selected{% endif %}>{{ opcion }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Destino</label>
      <select name="destino" class="form-select">
        <option value="">Todos</option>
        {% for opcion in origenes %}
          <option value="{{ opcion }}" {% if opcion == destino %}selected{% endif %}>{{ opcion }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-3">
      <label class="form-label">Fecha</label>
      <input type="date" name="fecha" class="form-control" value="{{ fecha }}">
    </div>
    <div class="col-md-1 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100"><i class="bi bi-search"></i></button>
    </div>
  </div>
</form>

<div class="table-card">
  <div class="table-responsive">
    <table class="table align-middle">
      <thead>
        <tr>
          <th>Origen</th>
          <th>Destino</th>
          <th>Fecha</th>
          <th>Hora</th>
          <th>Precio</th>
        </tr>
      </thead>
      <tbody>
        {% for ruta in rutas %}
          <tr>
            <td>{{ ruta.origen }}</td>
            <td>{{ ruta.destino }}</td>
            <td>{{ ruta.fecha|date:"d/m/Y" }}</td>
            <td>{{ ruta.hora_salida|time:"H:i" }}</td>
            <td>${{ ruta.precio }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted py-4">
              No hay rutas disponibles para los filtros seleccionados.
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
